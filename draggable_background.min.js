/**
 * Draggable Background plugin for jQuery
 *
 * v1.0.0
 *
 * Copyright (c) 2012 Kenneth Chung
 *
 * Licensed under the MIT licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 */!function(e){var t=e(window),n=function(e,t,n,r){if(arguments.length===3||r){if(n<e)return e;if(n>t)return t}return n};e.fn.backgroundDraggable=function(r){var r=e.extend({bounded:!0,axis:!1},r);return this.each(function(){var i=e(this),s=i.css("background-image");if(!s)return;var o={width:0,height:0};if(r.bounded){var u=new Image;u.onload=function(){o.width=u.width,o.height=u.height},u.src=s.match(/^url\((.*?)\)$/i)[1]}i.on("mousedown.dbg",function(e){if(e.which!==1)return;var s=e.pageX,u=e.pageY,a=i.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],f=parseInt(a[1])||0,l=parseInt(a[2])||0;t.on("mousemove.dbg",function(e){var t=e.pageX,a=e.pageY;f=r.axis==="y"?f:n(i.width()-o.width,0,f+t-s,r.bounded),l=r.axis==="x"?l:n(i.height()-o.height,0,l+a-u,r.bounded),i.css("background-position",f+"px "+l+"px"),s=t,u=a,e.preventDefault()}),e.preventDefault()}),t.on("mouseup.dbg",function(){t.off("mousemove.dbg")})})}}(jQuery);