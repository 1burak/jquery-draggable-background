/**
 * Draggable Background plugin for jQuery
 *
 * v1.0.0
 *
 * Copyright (c) 2012 Kenneth Chung
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */!function(e){var t=function(e,t,n,r){if(arguments.length===3||r){if(n<e)return e;if(n>t)return t}return n};e.fn.backgroundDraggable=function(n){var n=e.extend({bounded:!0,axis:!1},n);return this.each(function(){var r=e(this),i=r.css("background-image");if(!i)return;var s=i.replace(/url\(|\)$/ig,""),o={width:0,height:0};if(n.bounded){var u=new Image;u.onload=function(){o.width=u.width,o.height=u.height},u.src=s}r.on("mousedown.dbg",function(e){if(e.which!==1)return;var i=e.pageX,s=e.pageY;r.on("mousemove.dbg",function(e){var u=e.pageX,a=e.pageY,f=r.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],l=parseInt(f[1])||0,c=parseInt(f[2])||0,h=t(r.width()-o.width,0,l+u-i,n.bounded),p=t(r.height()-o.height,0,c+a-s,n.bounded);n.axis==="x"?r.css("background-position",h+"px "+c+"px"):n.axis==="y"?r.css("background-position",l+"px "+p+"px"):r.css("background-position",h+"px "+p+"px"),i=u,s=a})}).on("mouseup.dbg mouseleave.dbg",function(){r.off("mousemove.dbg")})})}}(jQuery);